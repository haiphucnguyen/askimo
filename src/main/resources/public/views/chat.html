<section x-data="chatView" class="h-full flex flex-col gap-3">
  <h2 class="text-xl font-semibold text-slate-800">Chat (Streaming)</h2>

  <div
    x-ref="messages"
    class="flex-1 min-h-[240px] border border-slate-200 rounded bg-white p-3 overflow-y-auto"
  >
    <template x-for="(m, i) in messages" :key="i">
      <div
        class="max-w-[80%] my-1 px-3 py-2 rounded whitespace-pre-wrap"
        :class="m.role==='user' ? 'ml-auto bg-blue-100' : 'mr-auto bg-slate-100'"
        x-text="m.content"
      ></div>
      <!-- render .content -->
    </template>
  </div>

  <div class="flex gap-2">
    <input
      x-model="input"
      @keydown.enter="sendStreaming"
      class="flex-1 border border-slate-300 rounded px-3 py-2"
      placeholder="Type and press Enterâ€¦"
    />
    <button
      @click="sendStreaming"
      class="px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50"
      :disabled="loading"
    >
      Stream
    </button>
    <button
      @click="stop"
      class="px-4 py-2 rounded border border-slate-300 disabled:opacity-50"
      :disabled="!loading"
    >
      Stop
    </button>
  </div>
</section>
