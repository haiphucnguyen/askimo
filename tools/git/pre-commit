#!/bin/sh
# This script installs the pre-commit hook for automatic code formatting

cat > .git/hooks/pre-commit <<'EOF'
#!/bin/sh
echo "ðŸ” Running spotlessApply before commit..."
./gradlew spotlessApply

# Check if spotlessApply failed
if [ $? -ne 0 ]; then
    echo "âŒ Spotless formatting failed! Please fix the errors and try again."
    exit 1
fi

# Re-add files that may have been changed by Spotless
git add -u

echo "âœ… Spotless formatting applied."
EOF

# Make the hook executable
chmod +x .git/hooks/pre-commit

echo "âœ… Pre-commit hook installed successfully!"
echo "ðŸ“ The hook will run './gradlew spotlessApply' before each commit."
